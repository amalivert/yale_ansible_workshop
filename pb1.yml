---
name: Yale workshop day 2
hosts: "{{ variable_host | default(‘localhost’)}}”
gather_facts: false
become: true

vars:
  password_var: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62306633373536333030653232373238616333336366613037623635366138656539666538666664
          3133393363666635366138363732336330373062353530620a383037376432343366646337643665
          37356230323265376666353865363263613830653132663333393038333433373233306363623661
          3937386266656636350a373563326537336336653939663733376662663761323532356239386330
          3133

vars_file:
 - "vars/users.yml"

tasks:
  - name: add group
    ansible.builtin.group:
       name: foo
       gid: 2000
       state: present


  - name: add user
    ansible.builtin.user:
      name: {{item}}
      comment: "{{item}}" account
      uid: 1001
      state: present
      password: "{{ password_var }}"
      group: foo
      groups:
         - wheel
    with_item: "{{ yale_uses }}"

